{
  "version": 2,
  "builds": [
    {
      "src": "python_app/*.py",
      "use": "@vercel/python"
    }
  ],
  "routes": [
    { "src": "/static/(.*)", "dest": "/static/$1" },
    { "src": "/.*", "dest": "python_app/index.py" }
  ],
  "env": {
    "DATABASE_URL": "@pgsecret"
  },
  "rewrites": [
    { "source": "/static/(.*)", "destination": "/static/$1" },
    { "source": "/(.*)", "destination": "/python_app/index.py" }
  ],
  "plugins": [
    "@vercel/plugin-python"
  ],
  "static": {
    "publicDirectory": "static"
  },
  "includeFiles": [
    "python_app/templates/**",
    "python_app/static/**"
  ],
  "functions": {
    "python_app/index.py": {
      "runtime": "@vercel/python@1.11.0",
      "environment": {
        "PYTHON_ENV": "production"
      }
    }
  },
  "envSecrets": {
    "pgsecret": {
      "from": "pg-credentials"
    }
  },
  "build": {
    "env": {
      "DATABASE_URL": "@pgsecret"
    },
    "envAlias": {
      "DATABASE_URL": "DATABASE_URL"
    },
    "functions": {
      "python_app/index.py": {
        "includeFiles": "python_app/**",
        "runtime": "@vercel/python@1.11.0",
        "memory": 1024
      }
    }
  },
  "databases": {
    "pg-credentials": {
      "connector": "@vercel/postgresql",
      "uri": "<postgresql://postgres:admin@localhost:5432/sistema_inventario>"
    }
  }
}

